
ikPolishShader

--------------------------------------------------------------------------------
■ 概要

ikPolishShaderはPBR(物理ベースレンダリング)風のシェーダーです。
素材特性をあらわすパラメータを元に、周囲の物体を映りこませることで
立体感と素材感を出すことができます。

このドキュメントでは最低限の使い方だけを説明しています。
詳細は、readme_detail.txtをお読みください。

以下のURLで使い方を簡単に説明しています。
　http://www.nicovideo.jp/watch/sm27733338
　※ 仕様変更のため、現在とは挙動が異なっている場合があります。


--------------------------------------------------------------------------------
■ 目次
・使用方法
・前バージョンからの移行時の注意
・使用、再配布に関して


--------------------------------------------------------------------------------
■ 使用方法

□ 最低限必要な設定

0. モデルを読み込む。
　※ できるだけスカイドームや背景モデルを読み込んでください。

1. MMDに ikPolishShader.x を追加する。

2. MMEのエフェクト割り当てを開き、
2-1. Mainタブで、モデルやステージなどに Main/PolishMain.fx を割り当てる。
　※ スカイドームには割り当てないでください。

2-2. EnvMapRTタブで、スカイドームに対して TEnvMap_emissive.fxを割り当てる。
　※ HDRから変換したスカイドームを使用している場合は、TEnvMap_rgbm.fxを割り当ててください。

2-3. ColorMapRTタブで、スカイドームに対して MaterialMap_Mask.fxを割り当てる。


--------------------------------------------------------------------------------
■ 前バージョンからの移行時の注意

□ v.0.17からの移行時の注意

・追加ライトを拡張するために、PPointLight*.xが使用できなくなりました。
代わりに PointLight.pmxを使用してください。ライトの追加数のに制限がなくなりました。

・PolishMain_common.fxsubが変更になりました。従来の設定を引き継ぐ場合は注意してください。
SecondSpecularXxx系のパラメータがCrearcoatXxxに置き換えられました。


□ v.0.16からの移行時の注意

・v.0.17から陰影計算の計算式が一新されています。
見た目が大きく変わる可能性があります。

・SSDOMapRTタブはSSAOMapRTタブに変更されました。中身は簡略化されています。

・マテリアルの設定ファイルを古いバージョンから移行する場合は、
MaterialMap_common.fxsub だけを最新のものに置き換えれば、
基本的にはそのまま利用できます。

・スカイドームのマテリアル設定にMaterialMap_Mask.fxを指定することが推奨になりました。
できるだけ指定してください。


□ v.0.15以前からの移行時の注意

・v.0.17から陰影計算の計算式が一新されています。
見た目が大きく変わる可能性があります。

・環境マップ作成位置を自動的に15MMD単位、上方向に持ち上げるようにしました。
ikPolishShader.xの高さを引き上げていた場合は適宜、下げてください。

・マテリアルの設定ファイルを古いバージョンから移行する場合は、
MaterialMap_common.fxsub だけを最新のものに置き換えれば、
基本的にはそのまま利用できます。

・PolishMain.fx も内部を書き換えています。
基本的には、新しい PolishMain_common.fxsubを上書きしないようにして、
旧PolishMain_xxx.fx を 新しいMainフォルダにコピーすることで流用できます。

・SSGIMapRTタブはSSAOMapRTに名前を変えました。中身は簡略化されています。

・ENABLE_HARD_SHADOW は廃止しました。
代わりにコントローラに"シャドウ"を追加しました。
ikPolishShader.fxsub 内の DefaultShadowScale でコントーラが無い場合の値を設定できます。
0でエッジがはっきりとした影、1でボケた影になります。

・環境マップに関する設定を簡略化しました。

・スカイドームのマテリアル設定にMaterialMap_Mask.fxを指定することが推奨になりました。
できるだけ指定してください。


--------------------------------------------------------------------------------
■ 使用、再配布に関して

エフェクトの利用、改造、再配布などについては自由に行ってもらってかまいません、
連絡も不要です。
このエフェクトを使用したことによって起きたすべての損害等について、
作者及び関係者は一切責任を負わないものとします。


ikeno
Twitter: @ikeno_mmd
